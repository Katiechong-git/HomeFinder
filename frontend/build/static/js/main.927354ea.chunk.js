(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{116:function(e,t){},135:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),s=n(31),i=n.n(s),o=(n(81),n(11)),l=n(34),j=n(9),u=n(12),h=n.n(u),b=n(17),d=n(72),O=n.n(d),p=(n(83),function(e){return Object(a.jsx)("div",{role:"navigation","aria-label":"Pagination Navigation",children:Object(a.jsx)(O.a,{pageCount:Math.ceil(e.totalPosts/e.postsPerPage),pageRangeDisplayed:10,marginPagesDisplayed:10,onPageChange:e.handlePageClick,containerClassName:"paginate-container",previousClassName:"paginate-previous",nextClassName:"paginate-next",pageClassName:"paginate-page",pageLinkClassName:"pagination-a",activeClassName:"paginate-active",disabledClassName:"paginate-disabled"})})}),x=n(8),g=n(32),m=n(74),f=n(14);var v=function(e){return Object(a.jsx)(m.a,{role:"main",children:e.posts.map((function(e){return Object(a.jsxs)(x.a,{bg:"light",children:[Object(a.jsx)(x.a.Img,{variant:"top",src:e.images[0],alt:"image of the house"}),Object(a.jsx)(x.a.Body,{children:Object(a.jsx)(x.a.Title,{children:e.title})}),Object(a.jsxs)(g.a,{className:"list-group-flush",children:[Object(a.jsxs)("label",{htmlFor:"price",children:[" ",Object(a.jsxs)(g.a.Item,{children:["Price: ",e.price]})]}),Object(a.jsx)("label",{htmlFor:"neighborhood",children:Object(a.jsxs)(g.a.Item,{children:["Neighborhood: ",e.neighborhood]})})," ",Object(a.jsx)("label",{htmlFor:"address",children:Object(a.jsxs)(g.a.Item,{children:["Address: ",e.address]})}),Object(a.jsx)(g.a.Item,{children:Object(a.jsx)(l.b,{to:"/posts/".concat(e._id),children:Object(a.jsx)(f.a,{variant:"light",children:"Click me to see more details about this house! \u2764\ufe0f"})})})]})]},e._id)}))})},y=n(6),C=n(26),w=n(48);var S=function(e){return Object(a.jsx)(y.a.Group,{role:"search",children:Object(a.jsxs)(y.a.Row,{className:"align-items-center",children:[Object(a.jsx)(y.a.Label,{className:"mr-sm-2",htmlFor:"inlineFormCustomSelect",children:"Search by..."}),Object(a.jsx)(C.a,{xs:"auto",children:Object(a.jsxs)(y.a.Control,{as:"select",className:"mr-sm-2",value:e.searchBy,onChange:e.handleSearchByChange,"aria-label":"Choose a value",custom:!0,children:[Object(a.jsx)("option",{value:"neighborhood",children:"Neighborhood"}),Object(a.jsx)("option",{value:"price",children:"Price"}),Object(a.jsx)("option",{value:"address",children:"Address"})]})}),Object(a.jsxs)(C.a,{children:[Object(a.jsx)(y.a.Label,{htmlFor:"inlineFormInputGroupSearch",srOnly:!0}),Object(a.jsxs)(w.a,{children:[Object(a.jsx)(w.a.Prepend,{children:Object(a.jsx)(w.a.Text,{children:"\ud83c\udfe0"})}),Object(a.jsx)(y.a.Control,{id:"inlineFormInputGroupSearch",placeholder:"What "+e.searchBy+" are you looking for?",value:e.search,onChange:e.handleSearchChange})]})]})]})})};var P=function(e){return Object(a.jsx)(y.a.Group,{role:"form",children:Object(a.jsxs)(y.a.Row,{className:"align-items-center",children:["Or you can sort by...",Object(a.jsx)(C.a,{xs:"auto",children:Object(a.jsxs)(y.a.Control,{as:"select",className:"mr-sm-2",id:"inlineFormCustomSelect",value:e.sortBy,onChange:e.handleSortByChange,custom:!0,children:[Object(a.jsx)("option",{value:"date",children:"Date posted (most recent)"}),Object(a.jsx)("option",{value:"price",children:"Price"})]})})]})})};var k=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(1),i=Object(o.a)(s,2),l=i[0],j=i[1],u=Object(r.useState)(""),d=Object(o.a)(u,2),O=d[0],x=d[1],g=Object(r.useState)("neighborhood"),m=Object(o.a)(g,2),f=m[0],y=m[1],C=Object(r.useState)("price"),w=Object(o.a)(C,2),k=w[0],B=w[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/posts").then((function(e){return e.json()}));case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var N=6*l,L=N-6,F=n.map((function(e){return e.images=e.images.map((function(e){return e=e.replace("50x50c","600x450")})),e})).filter((function(e){return""===O||!!e[f]&&e[f].replace(",","").toLowerCase().includes(O.toLowerCase())})).sort((function(e,t){return e[k]>t[k]?1:-1})).slice(L,N);return Object(a.jsxs)("div",{children:[Object(a.jsx)(S,{handleSearchChange:function(e){x(e.target.value)},handleSearchByChange:function(e){y(e.target.value)},searchBy:f,search:O}),Object(a.jsx)("br",{}),Object(a.jsx)(P,{handleSortByChange:function(e){B(e.target.value)},sortBy:k}),Object(a.jsx)("br",{}),Object(a.jsx)(v,{posts:F}),Object(a.jsx)(p,{postsPerPage:6,totalPosts:n.length,handlePageClick:function(e){var t=e.selected;console.log(t),j(t+1)}})]})},B=n(75),N=n.n(B),L=n(56),F=n(137),I=n(138),T=n(139),G=n(140),U=n(141),D=n(142);var J=function(){var e=Object(j.g)().postId,t=window.location.href;console.log(t);var n=Object(r.useState)({}),c=Object(o.a)(n,2),s=c[0],i=c[1],l=Object(r.useState)(""),u=Object(o.a)(l,2),d=u[0],O=u[1],p=s.postingbody,g=function(){var t=Object(b.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/posts/".concat(e)).then((function(e){return e.json()}));case 3:n=t.sent,console.log("post?",n),i(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("error ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("comment",d),e.next=3,fetch("/api/posts/post/".concat(s._id,"/comment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:d})});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g()}),[]),Object(a.jsx)("div",{role:"main",children:Object(a.jsxs)(x.a,{bg:"light",children:[Object(a.jsx)(x.a.Header,{children:Object(a.jsx)(x.a.Title,{children:s.title})}),Object(a.jsxs)(x.a.Body,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{children:Object.keys(s).length>0?s.images.map((function(e){return e=e.replace("50x50c","600x450")})).map((function(e){return Object(a.jsx)(L.a.Item,{children:Object(a.jsx)("img",{className:"d-block w-100",src:e,alt:"First slide"})})})):null})}),Object(a.jsx)("p",{children:N()(p)})]}),Object(a.jsxs)(x.a.Footer,{children:["Share this page with my friends! \ud83d\ude0d","  ",Object(a.jsx)(F.a,{url:t,children:Object(a.jsx)(I.a,{size:36})}),"  ",Object(a.jsx)(T.a,{url:t,children:Object(a.jsx)(G.a,{size:36})}),"  ",Object(a.jsx)(U.a,{url:t,children:Object(a.jsx)(D.a,{size:36})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)(y.a,{onSubmit:m,children:[Object(a.jsxs)(y.a.Group,{controlId:"formBasicComment",children:[Object(a.jsx)(y.a.Label,{children:"\u270d\ufe0f Comment here, you must log in to be able to post"}),Object(a.jsx)(y.a.Control,{as:"textarea",rows:3,onChange:function(e){return O(e.target.value)},value:d})]}),Object(a.jsx)(f.a,{variant:"outline-dark",type:"submit",children:"Submit"})]}),s.comments&&s.comments.map((function(e){return Object(a.jsxs)(x.a.Body,{children:["\ud83d\ude4b User @",e.username,' said "',e.description,'"']})}))]})]})})},E=n(36),H=n(19);var z=function(e){var t=e.user,n=function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/auth/logout");case 2:e.sent.ok&&(window.location.href="/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(E.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(E.a.Brand,{href:"#home",children:Object(a.jsx)("h1",{children:"Find your next home! \ud83c\udfe1"})}),Object(a.jsx)(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(E.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsxs)(H.a,{children:[Object(a.jsx)(H.a.Link,{href:"/",children:Object(a.jsx)(f.a,{variant:"light",children:"Home"})}),t?Object(a.jsx)(H.a.Link,{children:Object(a.jsx)(f.a,{variant:"light",onClick:n,children:"Sign out"})}):Object(a.jsxs)(H.a,{children:[Object(a.jsx)(H.a.Item,{children:Object(a.jsx)(H.a.Link,{href:"/signup",children:Object(a.jsx)(f.a,{variant:"light",children:"Sign up"})})}),Object(a.jsx)(H.a.Item,{children:Object(a.jsxs)(H.a.Link,{href:"/signin",children:[" ",Object(a.jsx)(f.a,{variant:"light",children:"Sign in"})]})})]})]})})]})};n(134);var A=function(e){var t=Object(r.useState)(""),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),l=Object(o.a)(i,2),j=l[0],u=l[1],d=function(){var e=Object(b.a)(h.a.mark((function e(t){var n,a,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:c,password:j},console.log(n),a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)},e.prev=4,e.next=7,fetch("/api/auth/login",a);case 7:return r=e.sent,e.next=10,r.json();case 10:s=e.sent,console.log("file: SigninPage.js ~ line 36 ~ handleSubmit ~ success",s),s?window.location.href="/":alert("Login Failed try again"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(x.a,{bg:"light",style:{width:"36rem"},role:"main",children:[Object(a.jsx)(x.a.Header,{children:Object(a.jsx)(x.a.Title,{children:"Sign in to add your comments to each post \ud83d\udcac"})}),Object(a.jsx)(x.a.Body,{children:Object(a.jsxs)(y.a,{onSubmit:d,children:[Object(a.jsxs)(y.a.Group,{controlId:"formBasicUsername",children:[Object(a.jsx)(y.a.Label,{children:"Username"}),Object(a.jsx)(y.a.Control,{type:"username",placeholder:"Username",value:c,onChange:function(e){return s(e.target.value)}})]}),Object(a.jsxs)(y.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(y.a.Label,{children:"Password"}),Object(a.jsx)(y.a.Control,{type:"password",placeholder:"Password",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(a.jsx)(f.a,{variant:"outline-dark",type:"submit",children:"Sign in"})]})})]})};var R=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),i=Object(o.a)(s,2),l=i[0],j=i[1],u=Object(r.useState)(""),d=Object(o.a)(u,2),O=d[0],p=d[1],g=function(){var e=Object(b.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),l===O){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("/api/users/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:l})});case 5:a=e.sent,window.location.href="/",console.log("Please create a account",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(x.a,{bg:"light",style:{width:"36rem"},role:"main",children:[Object(a.jsx)(x.a.Header,{children:Object(a.jsx)(x.a.Title,{children:"Create an account now \ud83e\udeb4"})}),Object(a.jsxs)(x.a.Body,{children:[" ",Object(a.jsxs)(y.a,{onSubmit:g,children:[Object(a.jsxs)(y.a.Group,{children:[Object(a.jsx)(y.a.Label,{children:"Username"}),Object(a.jsx)(y.a.Control,{type:"username",placeholder:"Username",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(a.jsxs)(y.a.Group,{children:[Object(a.jsx)(y.a.Label,{children:"Password"}),Object(a.jsx)(y.a.Control,{type:"password",placeholder:"Password",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(a.jsxs)(y.a.Group,{children:[Object(a.jsx)(y.a.Label,{children:"Password"}),Object(a.jsx)(y.a.Control,{type:"password",placeholder:"Confirm Password",value:O,onChange:function(e){return p(e.target.value)}})]}),Object(a.jsx)(f.a,{variant:"outline-dark",type:"submit",children:"Create account"})]})]})]})};var _=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){fetch("/api/auth/getUser").then((function(e){return e.json()})).then((function(e){e.username&&c(e)}))}),[]),Object(a.jsx)("div",{class:"container",children:Object(a.jsxs)(l.a,{children:[Object(a.jsx)(z,{user:n}),Object(a.jsx)("br",{}),Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{path:"/",exact:!0,children:Object(a.jsx)(k,{})}),Object(a.jsx)(j.b,{path:"/posts/:postId",exact:!0,children:Object(a.jsx)(J,{})}),Object(a.jsx)(j.b,{path:"/signup",children:Object(a.jsx)(R,{})}),Object(a.jsx)(j.b,{path:"/signin",children:Object(a.jsx)(A,{})}),Object(a.jsx)(j.b,{path:"/signout"}),Object(a.jsx)(j.a,{to:"/"})]})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,143)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(_,{})}),document.getElementById("root")),M()},81:function(e,t,n){},83:function(e,t,n){}},[[135,1,2]]]);
//# sourceMappingURL=main.927354ea.chunk.js.map